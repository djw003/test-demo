<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        input{
            margin: 2px;
        }
        .div1{
            background-color: rgb(250, 250, 250);
            width: 250px;
    }
    a{
        text-decoration: none;
        color: #000;
    }
    button{
        margin: 2px;
        cursor: pointer;
    }
    </style>
</head>
<body>
    <div class="div1">
        <form>
             手 机
             <input type="text" name="number"><br>
             姓 名
             <input type="text" name="name"><br>
             性 别
             <input type="text" name="sex"><br>
             地 址
             <input type="text" name="address"><br>
             年 龄
             <input type="text" name="age"><br>
             <button class="button1">提交</button><button class="button2"><a href="http://127.0.0.1:3000/全部联系人信息.html">查看全部联系人</a></button>
             </form>
    </div>
        <script src="./js/axios.js"></script>
        <script>
            
            let inputList=document.querySelectorAll("input")
            const getFormData=()=>{
              let obj={}
              inputList.forEach(item=>{
                obj[item.name]=item.value
              })
              
              return obj
            }
            document.querySelector(".button1").onclick=function(e){
                e.preventDefault()
                a=true
                let data=getFormData()
                console.log(data)
                for(i=0;i<inputList.length;i++){
                if(inputList[i].value==''){
                    alert("不能为空")
                    a=false
                    break
                }
            }
            if(a){
                axios({
                    url:'http://127.0.0.1:8000/v1/insert',
                    method:'post',
                    data:data
                }).then(res=>{
                    //成功回调
                    console.log(res)
                    location.href='http://127.0.0.1:3000/联系人信息.html'

                });
                for(i=0;i<inputList.length;i++){
                    inputList[i].value=''
                  }
            }
            }
            
           
        </script>
</body>
</html>